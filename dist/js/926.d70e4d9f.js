"use strict";(self["webpackChunkvue_trainee"]=self["webpackChunkvue_trainee"]||[]).push([[926],{5926:function(e,t,a){a.r(t),a.d(t,{default:function(){return Q}});var l=a(9269);function s(e,t,a,s,n,o){const i=(0,l.up)("Post"),r=(0,l.up)("Pagination");return(0,l.wg)(),(0,l.iD)(l.HY,null,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.getPosts.data,(e=>((0,l.wg)(),(0,l.iD)("div",{key:e.id},[(0,l.Wm)(i,{post:e},null,8,["post"])])))),128)),(0,l.Wm)(r)],64)}var n=a(3201);const o=e=>((0,l.dD)("data-v-7346d422"),e=e(),(0,l.Cn)(),e),i={class:"q-pa-md row items-start card-wrapper"},r={class:"date-block"},u=o((()=>(0,l._)("br",null,null,-1))),d=["src"],p={class:"card__title"},c={class:"card__description"},m={class:"text-subtitle2 flex items-center justify-end no-wrap card__footer__author"},g=["src"],h={class:"q-pl-sm card__footer__author__name"};function v(e,t,a,s,o,v){const b=(0,l.up)("q-card-section"),f=(0,l.up)("q-icon"),y=(0,l.up)("q-avatar"),_=(0,l.up)("q-card");return(0,l.wg)(),(0,l.iD)("div",i,[(0,l.Wm)(_,{class:"card cursor-pointer text-center",onClick:t[0]||(t[0]=e=>v.detailsPage(a.post._id))},{default:(0,l.w5)((()=>[(0,l._)("div",r,[(0,l._)("strong",null,(0,n.zw)(v.date[1]),1),u,(0,l.Uk)(" "+(0,n.zw)(v.date[0]),1)]),(0,l._)("img",{class:"card__image",src:a.post.image?`${o.baseUrl+a.post.image}`:"https://cdn.quasar.dev/img/mountains.jpg"},null,8,d),(0,l.Wm)(b,null,{default:(0,l.w5)((()=>[(0,l._)("p",p,(0,n.zw)(a.post.title?a.post.title:""),1)])),_:1}),(0,l.Wm)(b,{class:"q-pt-none"},{default:(0,l.w5)((()=>[(0,l._)("p",c,(0,n.zw)(a.post.description?a.post.description:""),1)])),_:1}),(0,l.Wm)(b,{class:"card__footer"},{default:(0,l.w5)((()=>[(0,l._)("div",null,[(0,l.Wm)(f,{class:"q-pr-sm",name:"forum",size:"sm"}),(0,l._)("span",null,(0,n.zw)(a.post.comments?a.post.comments.length:0),1)]),(0,l._)("div",m,[(0,l.Wm)(y,{class:"card__footer__author__avatar"},{default:(0,l.w5)((()=>[a.post.author&&a.post.author.avatar?((0,l.wg)(),(0,l.iD)("img",{key:1,class:"avatar",src:`${o.baseUrl+v.authorAvatar()}`},null,8,g)):((0,l.wg)(),(0,l.j4)(f,{key:0,class:"avatar",name:"face",size:"40px"}))])),_:1}),(0,l._)("span",h,(0,n.zw)(a.post.author&&a.post.author.name?a.post.author.name:"John Doe"),1)])])),_:1})])),_:1})])}var b=a(4455),f=a(6957),y={name:"PostBlock",props:{post:{type:Object,default:()=>{}}},data(){return{baseUrl:"http://test-blog-api.ficuslife.com"}},methods:{detailsPage(e){this.$router.push({name:"PostDetailsView",params:{id:e}})},authorAvatar(){if(this.post.author&&this.post.author.avatar)return this.post.author.avatar}},computed:{...(0,f.Se)(["getUserData","isAuth"]),date(){return this.post.dateCreated?(0,b.pJ)(this.post.dateCreated).split(" "):""},isLiked(){return this.isAuth?this.post.likes.includes(this.getUserData._id):""}}},_=a(7617),P=a(8055),x=a(9501),k=a(4633),w=a(9393),S=a(1410),V=a.n(S);const q=(0,_.Z)(y,[["render",v],["__scopeId","data-v-7346d422"]]);var B=q;function C(e,t,a,s,n,o){const i=(0,l.up)("q-pagination");return(0,l.wg)(),(0,l.j4)(i,{class:"flex-center",modelValue:n.currentPage,"onUpdate:modelValue":t[0]||(t[0]=e=>n.currentPage=e),max:this.getPosts.data?o.getTotalPages:0,"max-pages":5,"direction-links":""},null,8,["modelValue","max"])}V()(y,"components",{QCard:P.Z,QCardSection:x.Z,QIcon:k.Z,QAvatar:w.Z});var F={name:"PaginationBlock",data(){return{currentPage:+this.$route.query.page}},mounted(){this.currentPage=+this.$route.query.page||1,this.addRouteParam(),!this.$route.query.page||this.$route.query.page>this.getTotalPages?this.currentPage=1:this.$route.query.page},watch:{currentPage(){this.addRouteParam()},"$route.query.page"(){"HomeView"===this.$route.name&&(this.currentPage?this.currentPage=+this.$route.query.page:this.currentPage=1,this.fetchPosts())}},computed:{...(0,f.Se)(["getPosts"]),getTotalPages(){return Math.ceil(this.getPosts.pagination.total/5)}},methods:{async fetchPosts(){let e={params:{limit:5,skip:1!==this.currentPage?5*(this.currentPage-1):0}};await this.$store.dispatch("fetchPosts",e)},addRouteParam(){this.$router.push({name:"HomeView",query:{page:this.currentPage}})}}},$=a(6237),j=a(9804),z=a(6053),N=a(6597),D=a(3856),Z=a(7328),W=a(6809),L=(0,D.L)({name:"QPagination",props:{...N.S,modelValue:{type:Number,required:!0},min:{type:Number,default:1},max:{type:Number,required:!0},color:{type:String,default:"primary"},textColor:String,activeColor:String,activeTextColor:String,inputStyle:[Array,String,Object],inputClass:[Array,String,Object],size:String,disable:Boolean,input:Boolean,iconPrev:String,iconNext:String,iconFirst:String,iconLast:String,toFn:Function,boundaryLinks:{type:Boolean,default:null},boundaryNumbers:{type:Boolean,default:null},directionLinks:{type:Boolean,default:null},ellipses:{type:Boolean,default:null},maxPages:{type:Number,default:0,validator:e=>e>=0},ripple:{type:[Boolean,Object],default:null},round:Boolean,rounded:Boolean,flat:Boolean,outline:Boolean,unelevated:Boolean,push:Boolean,glossy:Boolean,dense:Boolean,padding:{type:String,default:"3px 2px"}},emits:["update:modelValue"],setup(e,{emit:t}){const{proxy:a}=(0,l.FN)(),{$q:s}=a,n=(0,N.Z)(e,s),o=(0,$.iH)(null),i=(0,l.Fl)({get:()=>e.modelValue,set:a=>{if(a=parseInt(a,10),e.disable||isNaN(a))return;const l=(0,Z.vX)(a,e.min,e.max);e.modelValue!==l&&t("update:modelValue",l)}});function r(e,t){return[!0,!1].includes(e)?e:t}(0,l.YP)((()=>e.min+e.max),(()=>{i.value=e.modelValue}));const u=(0,l.Fl)((()=>"q-pagination row no-wrap items-center"+(!0===e.disable?" disabled":""))),d=(0,l.Fl)((()=>i.value+" / "+e.max)),p=(0,l.Fl)((()=>r(e.boundaryLinks,e.input))),c=(0,l.Fl)((()=>r(e.boundaryNumbers,!e.input))),m=(0,l.Fl)((()=>r(e.directionLinks,e.input))),g=(0,l.Fl)((()=>r(e.ellipses,!e.input))),h=(0,l.Fl)((()=>{const t=[e.iconFirst||s.iconSet.pagination.first,e.iconPrev||s.iconSet.pagination.prev,e.iconNext||s.iconSet.pagination.next,e.iconLast||s.iconSet.pagination.last];return!0===s.lang.rtl?t.reverse():t})),v=(0,l.Fl)((()=>!0===e.disable?{"aria-disabled":"true"}:{})),b=(0,l.Fl)((()=>({round:e.round,rounded:e.rounded,outline:e.outline,unelevated:e.unelevated,push:e.push,glossy:e.glossy,dense:e.dense,padding:e.padding,color:e.color,flat:!0,size:e.size,ripple:null===e.ripple||e.ripple}))),f=(0,l.Fl)((()=>({flat:e.flat,color:e.activeColor||e.color,textColor:e.activeTextColor||e.textColor})));function y(e){i.value=e}function _(e){i.value=i.value+e}function P(){i.value=o.value,o.value=null}function x(t,a){const s={...b.value,...t};return void 0!==a&&(void 0!==e.toFn?s.to=e.toFn(a):s.onClick=()=>y(a)),(0,l.h)(j.Z,s)}return Object.assign(a,{set:y,setByOffset:_}),()=>{const t=[],a=[],s=[];if(p.value&&(t.push(x({key:"bls",disable:e.disable||e.modelValue<=e.min,icon:h.value[0]},e.min)),a.unshift(x({key:"ble",disable:e.disable||e.modelValue>=e.max,icon:h.value[3]},e.max))),m.value&&(t.push(x({key:"bdp",disable:e.disable||e.modelValue<=e.min,icon:h.value[1]},e.modelValue-1)),a.unshift(x({key:"bdn",disable:e.disable||e.modelValue>=e.max,icon:h.value[2]},e.modelValue+1))),!0===e.input)s.push((0,l.h)(z.Z,{class:"inline",style:{width:d.value.length/1.5+"em"},type:"number",dense:!0,value:o.value,disable:e.disable,dark:n.value,borderless:!0,inputClass:e.inputClass,inputStyle:e.inputStyle,placeholder:d.value,min:e.min,max:e.max,"onUpdate:modelValue"(e){o.value=e},onKeyup(e){!0===(0,W.So)(e,13)&&P()},onBlur:P}));else{let l=Math.max(e.maxPages,1+(g.value?2:0)+(c.value?2:0)),n=e.min,o=e.max,i=!1,r=!1,u=!1,d=!1;e.maxPages&&l<e.max-e.min+1&&(l=1+2*Math.floor(l/2),n=Math.max(e.min,Math.min(e.max-l+1,e.modelValue-Math.floor(l/2))),o=Math.min(e.max,n+l-1),c.value&&(u=!0,n+=1),g.value&&n>e.min+(c.value?1:0)&&(i=!0,n+=1),c.value&&(d=!0,o-=1),g.value&&o<e.max-(c.value?1:0)&&(r=!0,o-=1));const p={minWidth:`${Math.max(2,String(e.max).length)}em`};if(u){const a=e.min===e.modelValue;t.push(x({key:"bns",style:p,disable:e.disable,flat:!a,label:e.min,...a?f.value:{}},e.min))}if(d){const t=e.max===e.modelValue;a.unshift(x({key:"bne",style:p,disable:e.disable,flat:!t,label:e.max,...t?f.value:{}},e.max))}i&&t.push(x({key:"bes",style:p,disable:e.disable,label:"…",ripple:!1},n-1)),r&&a.unshift(x({key:"bee",style:p,disable:e.disable,label:"…",ripple:!1},o+1));for(let t=n;t<=o;t++){const a={key:`bpg${t}`,style:p,disable:e.disable,label:t};t===e.modelValue&&Object.assign(a,f.value),s.push(x(a,t))}}return(0,l.h)("div",{class:u.value,...v.value},[t,(0,l.h)("div",{class:"row justify-center"},[s]),a])}}});const M=(0,_.Z)(F,[["render",C]]);var U=M;V()(F,"components",{QPagination:L});var A={name:"PostsBlock",components:{Post:B,Pagination:U},computed:{...(0,f.Se)(["getPosts"])}};const O=(0,_.Z)(A,[["render",s]]);var Q=O}}]);
//# sourceMappingURL=926.d70e4d9f.js.map