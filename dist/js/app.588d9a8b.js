(function(){"use strict";var t={2084:function(t,e,n){n.d(e,{GE:function(){return i},dg:function(){return r},rO:function(){return a}});var o=n(9797);function a(t){o.Z.create({type:"positive",message:t,position:"top-right",timeout:"2000"})}function i(t){o.Z.create({type:"negative",message:t,position:"top-right",timeout:"2000"})}function r(){o.Z.create({type:"positive",message:"Logged Out",position:"top-right",timeout:"2000"})}},9222:function(t,e,n){var o=n(5102),a=n(9269);function i(t,e,n,o,i,r){const s=(0,a.up)("router-view");return(0,a.wg)(),(0,a.j4)(s)}var r=n(6957),s={name:"LayoutDefault",async created(){const t=localStorage.getItem("token");!this.isAuth&&t&&await this.$store.dispatch("getUser")},computed:{...(0,r.Se)(["isAuth"])}},c=n(7617);const u=(0,c.Z)(s,[["render",i]]);var d=u,m=n(2746),p=n(406),l=n(8029),f=n(9797),h=n(5541),g=n(6679),v={config:{},plugins:{Notify:f.Z,Loading:h.Z,Dialog:g.Z}};(0,o.ri)(d).use(l.Z,v).use(p.Z).use(m.Z).mount("#app")},2746:function(t,e,n){var o=n(3538),a=n(3485),i=n(406);const r=[{path:"/auth/",name:"AuthLayout",component:()=>n.e(909).then(n.bind(n,7909)),children:[{path:"signup",name:"SignUp",component:()=>Promise.all([n.e(624),n.e(589)]).then(n.bind(n,9589))},{path:"login",name:"LogIn",component:()=>Promise.all([n.e(624),n.e(358)]).then(n.bind(n,1358))}]},{path:"/",redirect:{name:"HomeView"},name:"MainLayout",component:()=>Promise.all([n.e(242),n.e(653)]).then(n.bind(n,9653)),children:[{path:"home",name:"HomeView",component:()=>Promise.all([n.e(241),n.e(926),n.e(916)]).then(n.bind(n,8907)),children:[{path:"/:page?",component:()=>Promise.all([n.e(241),n.e(926),n.e(73)]).then(n.bind(n,5926))}]},{path:"post/:id",name:"PostDetailsView",component:()=>Promise.all([n.e(241),n.e(624),n.e(339)]).then(n.bind(n,2339))},{path:"author/:id",name:"AuthorView",component:()=>Promise.all([n.e(241),n.e(242),n.e(828)]).then(n.bind(n,2828))},{path:"new-post",name:"NewPost",component:()=>Promise.all([n.e(624),n.e(251)]).then(n.bind(n,4251))}]},{path:"/:pathMatch(.*)*",name:"NotFound",component:()=>n.e(672).then(n.bind(n,9672))}],s=(0,a.p7)({history:(0,a.PO)("/"),routes:r});s.beforeEach(((t,e,n)=>{const a=localStorage.getItem("token");if(a){const t=(0,o.Z)(a);Date.now()>=1e3*t.exp?(i.Z.dispatch("logOut"),s.push({name:"HomeView"})):n()}else n()})),e["Z"]=s},1652:function(t,e,n){var o=n(6085),a=n.n(o),i=n(5541);const r="http://test-blog-api.ficuslife.com",s=a().create({baseURL:r,headers:{accept:"application/json"}});s.interceptors.request.use((function(t){let e=localStorage.getItem("token");return e&&(t.headers={Authorization:`Bearer ${e}`}),i.Z.show({delay:400}),t}),(function(t){return Promise.reject(t)})),s.interceptors.response.use((t=>(i.Z.hide(),t)),(function(t){return i.Z.hide(),t})),e["Z"]=s},406:function(t,e,n){n.d(e,{Z:function(){return p}});var o=n(6957),a=n(1652);async function i(t){return await Promise.all(s(t))}async function r(t){return await Promise.all(c(t))}function s(t){return t.map((async t=>t.postedBy?await p.dispatch("fetchAuthor",t.postedBy):null))}function c(t){return t.map((async t=>await p.dispatch("fetchComments",t._id)))}function u(t,e){return t.map(((t,n)=>({...t,comments:e[n]})))}function d(t,e){return t.map(((t,n)=>({...t,author:e[n]})))}var m=n(2084),p=(0,o.MT)({state:{user:null,posts:null,comments:null,detailsPost:null},getters:{isAuth(t){return!!t.user},getUserData(t){return t.user},getPosts(t){return t.posts},getDetailsPost(t){return t.detailsPost},getComments(t){return t.comments}},mutations:{SET_USER_DATA(t,e){t.user=e},UPDATE_USER_DATA(t,e){t.user=e},CLEAR_USER_DATA(t){t.user=null,localStorage.removeItem("token"),console.log(t.user)},DELETE_USER_DATA(t){t.user=null},SET_POSTS(t,e){t.posts=e},SET_DETAILS_POST(t,e){t.detailsPost=e},UPDATE_DETAILS_POST(t,e){t.detailsPost=e},SET_COMMENTS(t,e){t.comments=e},CREATE_COMMENT(t,e){t.comments.push(e)},EDIT_COMMENT(t,e){const n=t.comments.findIndex((t=>t._id===e._id));t.comments.splice(n,1,e)},REMOVE_COMMENT(t,e){t.comments=t.comments.filter((t=>t._id!==e))}},actions:{async register(t,e){await a.Z.post("/api/v1/users",e)},async getAuthToken({dispatch:t},e){const n=await a.Z.post("/api/v1/auth",e);localStorage.setItem("token",n.data.token),await t("getUser")},async getUser({commit:t}){const e=await a.Z.get("/api/v1/auth/user");t("SET_USER_DATA",e.data)},logOut({commit:t}){t("CLEAR_USER_DATA"),(0,m.dg)()},deleteUser({commit:t,getters:e}){const n=e.getUserData._id;return t("DELETE_USER_DATA"),a.Z["delete"](`/api/v1/users/${n}`),!0},async fetchPosts({commit:t},e){const n=await a.Z.get("/api/v1/posts",e),o=await i(n.data.data),s=await r(n.data.data),c=d(n.data.data,o),m=u(c,s),p={pagination:n.data.pagination,data:{...m}};t("SET_POSTS",p)},async fetchOwnPosts(t,e){const n=await a.Z.get("api/v1/posts",e.limit),o=n.data.data.filter((t=>t.postedBy===e.id));return o},async fetchDetailsPost({commit:t},e){const n=await a.Z.get(`api/v1/posts/${e}`);return t("SET_DETAILS_POST",n.data),n},async fetchAuthor(t,e){try{const t=await a.Z.get(`/api/v1/users/${e}`);return t.data}catch(n){console.log(n)}},async postLike(t,e){await a.Z.put(`api/v1/posts/like/${e}`)},async fetchComments({commit:t},e){const n=await a.Z.get(`/api/v1/comments/post/${e}`);return t("SET_COMMENTS",n.data),n.data},async commentLike(t,e){await a.Z.put(`api/v1/comments/like/${e}`)},async commentCreate({commit:t},e){const n=e.id,o=e.text,i=e.followedCommentID,r=await a.Z.post(`api/v1/comments/post/${n}`,{text:o,followedCommentID:i});t("CREATE_COMMENT",r.data)},async commentEdit({commit:t},e){const n=e.id,o=e.text,i=await a.Z.patch(`api/v1/comments/${n}`,{text:o});t("EDIT_COMMENT",i.data)},async commentRemove({commit:t},e){t("REMOVE_COMMENT",e),await a.Z["delete"](`api/v1/comments/${e}`)},async updateAvatar({commit:t},e){const n=e.img,o=e.id,i=await a.Z.put(`api/v1/users/upload/${o}`,n,{headers:{"Content-Type":"multipart/form-data"}});t("UPDATE_USER_DATA",i.data)},async updateUser({getters:t,commit:e},n){const o=t.getUserData._id,i=await a.Z.patch(`api/v1/users/${o}`,n);e("UPDATE_USER_DATA",i.data)},async updatePostImage({commit:t},e){const n=e.img,o=e.id,i=await a.Z.put(`api/v1/posts/upload/${o}`,n,{headers:{"Content-Type":"multipart/form-data"}});t("UPDATE_DETAILS_POST",i.data)},async updatePost({commit:t},e){const n=e.obj,o=e.id,i=await a.Z.patch(`api/v1/posts/${o}`,n);t("UPDATE_DETAILS_POST",i.data)},async createPost(t,e){const n=await a.Z.post("api/v1/posts",e);return n.data._id},deletePost(t,e){a.Z["delete"](`api/v1/posts/${e}`)}},modules:{}})}},e={};function n(o){var a=e[o];if(void 0!==a)return a.exports;var i=e[o]={exports:{}};return t[o](i,i.exports,n),i.exports}n.m=t,function(){var t=[];n.O=function(e,o,a,i){if(!o){var r=1/0;for(d=0;d<t.length;d++){o=t[d][0],a=t[d][1],i=t[d][2];for(var s=!0,c=0;c<o.length;c++)(!1&i||r>=i)&&Object.keys(n.O).every((function(t){return n.O[t](o[c])}))?o.splice(c--,1):(s=!1,i<r&&(r=i));if(s){t.splice(d--,1);var u=a();void 0!==u&&(e=u)}}return e}i=i||0;for(var d=t.length;d>0&&t[d-1][2]>i;d--)t[d]=t[d-1];t[d]=[o,a,i]}}(),function(){n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,{a:e}),e}}(),function(){n.d=function(t,e){for(var o in e)n.o(e,o)&&!n.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:e[o]})}}(),function(){n.f={},n.e=function(t){return Promise.all(Object.keys(n.f).reduce((function(e,o){return n.f[o](t,e),e}),[]))}}(),function(){n.u=function(t){return"js/"+t+"."+{73:"da645f20",241:"904eccc6",242:"4909c855",251:"f166f203",339:"47485dc8",358:"ee5697f4",589:"c7dcc806",624:"d71438b4",653:"0e26b4c6",672:"f3371dfd",828:"3840791f",909:"4842b269",916:"87d3eb73",926:"d70e4d9f"}[t]+".js"}}(),function(){n.miniCssF=function(t){return"css/"+t+"."+{73:"41ddd896",251:"b8325f02",339:"dc4f6b2f",653:"73158d7f",672:"b0afbc37",828:"2a27929d",916:"41ddd896"}[t]+".css"}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){var t={},e="vue-trainee:";n.l=function(o,a,i,r){if(t[o])t[o].push(a);else{var s,c;if(void 0!==i)for(var u=document.getElementsByTagName("script"),d=0;d<u.length;d++){var m=u[d];if(m.getAttribute("src")==o||m.getAttribute("data-webpack")==e+i){s=m;break}}s||(c=!0,s=document.createElement("script"),s.charset="utf-8",s.timeout=120,n.nc&&s.setAttribute("nonce",n.nc),s.setAttribute("data-webpack",e+i),s.src=o),t[o]=[a];var p=function(e,n){s.onerror=s.onload=null,clearTimeout(l);var a=t[o];if(delete t[o],s.parentNode&&s.parentNode.removeChild(s),a&&a.forEach((function(t){return t(n)})),e)return e(n)},l=setTimeout(p.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=p.bind(null,s.onerror),s.onload=p.bind(null,s.onload),c&&document.head.appendChild(s)}}}(),function(){n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){n.p="/"}(),function(){var t=function(t,e,n,o){var a=document.createElement("link");a.rel="stylesheet",a.type="text/css";var i=function(i){if(a.onerror=a.onload=null,"load"===i.type)n();else{var r=i&&("load"===i.type?"missing":i.type),s=i&&i.target&&i.target.href||e,c=new Error("Loading CSS chunk "+t+" failed.\n("+s+")");c.code="CSS_CHUNK_LOAD_FAILED",c.type=r,c.request=s,a.parentNode.removeChild(a),o(c)}};return a.onerror=a.onload=i,a.href=e,document.head.appendChild(a),a},e=function(t,e){for(var n=document.getElementsByTagName("link"),o=0;o<n.length;o++){var a=n[o],i=a.getAttribute("data-href")||a.getAttribute("href");if("stylesheet"===a.rel&&(i===t||i===e))return a}var r=document.getElementsByTagName("style");for(o=0;o<r.length;o++){a=r[o],i=a.getAttribute("data-href");if(i===t||i===e)return a}},o=function(o){return new Promise((function(a,i){var r=n.miniCssF(o),s=n.p+r;if(e(r,s))return a();t(o,s,a,i)}))},a={143:0};n.f.miniCss=function(t,e){var n={73:1,251:1,339:1,653:1,672:1,828:1,916:1};a[t]?e.push(a[t]):0!==a[t]&&n[t]&&e.push(a[t]=o(t).then((function(){a[t]=0}),(function(e){throw delete a[t],e})))}}(),function(){var t={143:0};n.f.j=function(e,o){var a=n.o(t,e)?t[e]:void 0;if(0!==a)if(a)o.push(a[2]);else if(73!=e){var i=new Promise((function(n,o){a=t[e]=[n,o]}));o.push(a[2]=i);var r=n.p+n.u(e),s=new Error,c=function(o){if(n.o(t,e)&&(a=t[e],0!==a&&(t[e]=void 0),a)){var i=o&&("load"===o.type?"missing":o.type),r=o&&o.target&&o.target.src;s.message="Loading chunk "+e+" failed.\n("+i+": "+r+")",s.name="ChunkLoadError",s.type=i,s.request=r,a[1](s)}};n.l(r,c,"chunk-"+e,e)}else t[e]=0},n.O.j=function(e){return 0===t[e]};var e=function(e,o){var a,i,r=o[0],s=o[1],c=o[2],u=0;if(r.some((function(e){return 0!==t[e]}))){for(a in s)n.o(s,a)&&(n.m[a]=s[a]);if(c)var d=c(n)}for(e&&e(o);u<r.length;u++)i=r[u],n.o(t,i)&&t[i]&&t[i][0](),t[i]=0;return n.O(d)},o=self["webpackChunkvue_trainee"]=self["webpackChunkvue_trainee"]||[];o.forEach(e.bind(null,0)),o.push=e.bind(null,o.push.bind(o))}();var o=n.O(void 0,[998],(function(){return n(9222)}));o=n.O(o)})();
//# sourceMappingURL=app.588d9a8b.js.map